package:
  name: fluxbox
  version: 1.3.7
  epoch: 0
  description: Fluxbox Window Manager
  copyright:
    - license: GPL-2.0-or-later

environment:
  contents:
    packages:
      - autoconf
      - automake
      - build-base
      - busybox
      - ca-certificates-bundle
      - gettext-dev
      - libtool
      - libx11-dev
      - libxext-dev
      - pkgconf-dev

pipeline:
  # Upstream repo does not cut new tags or releases. See note at bottom of file.
  - uses: git-checkout
    with:
      expected-commit: 0f95d62b1b1add8ee7327305db7d372010fdb2f4
      repository: https://github.com/fluxbox/fluxbox.git

  - runs: |
      ./autogen.sh

  - name: 'Configure binutils'
    runs: |
      ./configure \
        --disable-nls

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

# Upstream repository no longer cuts any tags or releases (since 2015). The
# last tag cut was v1.3.7 back in 2015, but there have been several commits
# since then, including fixes to compile against gcc 11+. This is why updates
# are disabled, as we're fixing to a given commit ID in the main branch.
update:
  enabled: false

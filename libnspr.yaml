package:
  name: libnspr
  version: 4.35
  epoch: 0
  description: "Netscape Portable Runtime (NSPR) provides a platform-neutral API for system level and libc-like functions."
  copyright:
    - license: Mozilla Public License v2

environment:
  contents:
    packages:
      - build-base
      - busybox
      - mercurial
      - bash

pipeline:
  # we need to use runs because melange dont have a mercurial checkout pipeline yet
  - runs: |
      hg clone https://hg.mozilla.org/projects/nspr

  - uses: autoconf/configure
    with:
      dir: nspr
      opts: |
        --enable-64bit \
        --host=${{host.triplet.gnu}} \
        --target=${{host.triplet.gnu}} \
        --prefix=/usr

  - uses: autoconf/make
    with:
      dir: nspr

  - uses: autoconf/make-install
    with:
      dir: nspr

  - uses: strip

subpackages:
  - name: libnspr-dev
    pipeline:
      - uses: split/dev

update:
  enabled: true
  release-monitor:
    identifier: 7953

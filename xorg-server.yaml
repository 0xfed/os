package:
  name: xorg-server
  version: 21.1.9
  epoch: 0
  description: "X Server"
  copyright:
    - license: SGI-B-2.0
  dependencies:
    runtime:
      - dbus
      - dbus-x11
      - font-misc
      - systemd
      - ttf-dejavu
      - xkbcomp
      - xkeyboard-config

environment:
  contents:
    packages:
      - autoconf
      - automake
      - build-base
      - busybox
      - freetype-dev
      - libdrm
      - libdrm-dev
      - libepoxy-dev
      - libfontenc-dev
      - libgcrypt-dev
      - libpciaccess-dev
      - libx11-dev
      - libxcvt-dev
      - libxext-dev
      - libxfixes-dev
      - libxfont-dev
      - libxkbfile-dev
      - libxxf86vm-dev
      - mesa-dev
      - mesa-gbm
      - mesa-gl
      - pixman-dev
      - zlib-dev

pipeline:
  - uses: fetch
    with:
      uri: https://www.x.org/releases/individual/xserver/xorg-server-${{package.version}}.tar.xz
      expected-sha256: ff697be2011b4c4966b7806929e51b7a08e9d33800d505305d26d9ccde4b533a

  - uses: autoconf/configure
    with:
      opts: |
        --prefix=/usr \
        --with-default-font-path=/usr/share/fonts/misc \
        --with-xkb-path=/usr/local/share/X11/xkb \
        --mandir=/usr/share/man

  - uses: autoconf/make

  - uses: autoconf/make-install

update:
  enabled: true
  release-monitor:
    identifier: 5250

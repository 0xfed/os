package:
  name: temporal-docker
  # This project doesn't do releases and everything is commit based.
  # This corresponds to commit b9796237b9cb028d90424fd0859e10133c510a29
  version: 0.0_git20231116
  epoch: 0
  description: Temporal service Docker images build
  copyright:
    - license: MIT License

vars:
  commit: 70f8b8bbda3723fe7c8f822cc8aa379598ac8c86

pipeline:
  - uses: fetch
    with:
      expected-sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      extract: "false"
      uri: https://github.com/temporalio/docker-builds/archive/${{vars.commit}}.zip

  - runs: |
      unzip -q ${{vars.commit}}.zip
      mv docker-builds-${{vars.commit}} docker-builds
      rm *.zip

  - runs: |
      mkdir -p "${{targets.destdir}}"/etc/temporal/

      cp docker/entrypoint.sh "${{targets.destdir}}"/etc/temporal/
      chmod +x "${{targets.destdir}}"/etc/temporal/entrypoint.sh

      cp docker/start-temporal.sh "${{targets.destdir}}"/etc/temporal/
      chmod +x "${{targets.destdir}}"/etc/temporal/start-temporal.sh

update:
  enabled: false
